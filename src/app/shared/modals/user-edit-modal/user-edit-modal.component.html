<div class="modal-header">
  <h4 class="modal-title">{{ modalTitle }}</h4>
  <button type="button" class="btn-close" aria-label="Close" (click)="onCancel()"  >
  </button>
</div>

<div class="modal-body">
  <form [formGroup]="userForm" (ngSubmit)="onSubmit()" novalidate>
    <div class="mb-3" *ngIf="mode == 'edit'">
      <div class="text-center">
        <img [src]="avatar?.value" [alt]="firstName?.value + ' ' + lastName?.value" class="img-fluid rounded-circle" style="width: 100px; height: 100px;">
      </div>
    </div>
    <div class="mb-3">
      <label for="firstName" class="form-label">Nombre *</label>
      <div class="input-group">
        <span class="input-group-text">
          <i class="bi bi-person"></i>
        </span>
        <input 
          type="text" 
          class="form-control"
          [class.is-invalid]="firstName?.invalid && (firstName?.dirty || firstName?.touched)"
          [class.is-valid]="firstName?.valid && (firstName?.dirty || firstName?.touched)"
          id="firstName" 
          formControlName="first_name"
          placeholder="Ingresa el nombre"
           >
      </div>
      <div class="invalid-feedback" *ngIf="firstName?.invalid && (firstName?.dirty || firstName?.touched)">
        {{ getErrorMessage('first_name') }}
      </div>
    </div>

    <div class="mb-3">
      <label for="lastName" class="form-label">Apellido *</label>
      <div class="input-group">
        <span class="input-group-text">
          <i class="bi bi-person-badge"></i>
        </span>
        <input 
          type="text" 
          class="form-control"
          [class.is-invalid]="lastName?.invalid && (lastName?.dirty || lastName?.touched)"
          [class.is-valid]="lastName?.valid && (lastName?.dirty || lastName?.touched)"
          id="lastName" 
          formControlName="last_name"
          placeholder="Ingresa el apellido"
           >
      </div>
      <div class="invalid-feedback" *ngIf="lastName?.invalid && (lastName?.dirty || lastName?.touched)">
        {{ getErrorMessage('last_name') }}
      </div>
    </div>

    <div class="mb-3">
      <label for="email" class="form-label">Email *</label>
      <div class="input-group">
        <span class="input-group-text">
          <i class="bi bi-envelope"></i>
        </span>
        <input 
          type="email" 
          class="form-control"
          [class.is-invalid]="email?.invalid && (email?.dirty || email?.touched)"
          [class.is-valid]="email?.valid && (email?.dirty || email?.touched)"
          id="email" 
          formControlName="email"
          placeholder="ejemplo@correo.com"
           >
      </div>
      <div class="invalid-feedback" *ngIf="email?.invalid && (email?.dirty || email?.touched)">
        {{ getErrorMessage('email') }}
      </div>
    </div>

    <div class="mb-3">
      <label for="avatar" class="form-label">Avatar (URL de imagen)</label>
      <div class="input-group">
        <span class="input-group-text">
          <i class="bi bi-image"></i>
        </span>
        <input 
          type="url" 
          class="form-control"
          [class.is-invalid]="avatar?.invalid && (avatar?.dirty || avatar?.touched)"
          [class.is-valid]="avatar?.valid && (avatar?.dirty || avatar?.touched)"
          id="avatar" 
          formControlName="avatar"
          placeholder="https://ejemplo.com/imagen.jpg"
           >
      </div>
      <div class="invalid-feedback" *ngIf="avatar?.invalid && (avatar?.dirty || avatar?.touched)">
        {{ getErrorMessage('avatar') }}
      </div>
      <div class="form-text">Opcional. Debe ser una URL v√°lida de imagen (jpg, jpeg, png, gif, webp)</div>
    </div>
  </form>
</div>

<div class="modal-footer">
  <button type="button" class="btn btn-secondary" (click)="onCancel()"  >
    Cancelar
  </button>
  
  <button 
    type="button" 
    class="btn btn-success" 
    (click)="onSubmit()"
    [disabled]="userForm.invalid">
    <span>
      {{ mode === 'create' ? 'Crear' : 'Actualizar' }}
    </span>
  </button>
</div>